remove <- as.data.frame(country_sums$country[country_sums$no.papers < 30]) # list countries w/ < 30 papers
keep <- as.data.frame(country_sums$country[country_sums$no.papers > 30])
## subset countries with > 30 papers
df<- subset(df, df$country %in% keep$`country_sums$country[country_sums$no.papers > 30]`)
sums <-aggregate(df$value, by=list(df$country,df$variable), FUN=sum)
names(sums) = c("country","topic","sum")
## calculate country + topic sums
country_sums <- aggregate(sums$sum, by=list(sums$country), FUN=sum) # no. papers per country
names(country_sums) = c("country","no.papers")
topic_sums <- aggregate(sums$sum, by=list(sums$topic), FUN=sum)
names(topic_sums) = c("topic","sum")
## topic
topic_pick <- "island and extreme weather"
topic_total <- topic_sums$sum[topic_sums$topic == topic_pick]
topic_subset <- subset(sums, topic == topic_pick)
topic_subset <- cbind(topic_subset, country_sums)
topic_subset[4] <- NULL
topic_subset$perc <- topic_subset$sum / topic_subset$no.papers * 100
ggdotchart(topic_subset,
x= "country", y = "perc",
rotate = TRUE, add = "segments", sorting = "descending",
title = topic_pick) +
xlab(NULL) +
ylab("Percent of research on topic")
library(dplyr)
library(reshape2)
en <- read.csv("./data/topic_names_en.csv")
View(en)
es <- read.csv("./data/topic_names_es.csv")
pt <- read.csv("./data/topic_names_pt.csv")
View(en)
en <- melt(en,
id.vars "NSF_specific_en" = )
en <- melt(en,
id.vars = "NSF_specific_en")
View(en)
en <- read.csv("./data/topic_names_en.csv")
en2 <- melt(en,
id.vars = "topic_id_en")
View(en2)
en <- read.csv("./data/topic_names_en.csv")
es <- read.csv("./data/topic_names_es.csv")
pt <- read.csv("./data/topic_names_pt.csv")
en2 <- melt(en,
id.vars = "topic_id")
es2 <- melt(es,
id.vars = "topic_id")
x <- rbine(en2,es2)
x <- rbind(en2,es2)
View(x)
pt2 <- melt(pt,
id.vars = "topic_id")
x <- rbind(en2,es2,pt2)
en$en <- "en"
View(en)
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = "topic_id")
es2 <- melt(es,
id.vars = "topic_id")
pt2 <- melt(pt,
id.vars = "topic_id")
x <- rbind(en2,es2,pt2)
en2 <- melt(en,
id.vars = c("topic_id","lang"))
View(en2)
library(dplyr)
library(reshape2)
en <- read.csv("./data/topic_names_en.csv")
es <- read.csv("./data/topic_names_es.csv")
pt <- read.csv("./data/topic_names_pt.csv")
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = "topic_id")
pt2 <- melt(pt,
id.vars = "topic_id")
x <- rbind(en2,es2,pt2)
en <- read.csv("./data/topic_names_en.csv")
es <- read.csv("./data/topic_names_es.csv")
pt <- read.csv("./data/topic_names_pt.csv")
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
View(x)
library(dplyr)
library(reshape2)
en <- read.csv("./data/topic_names_en.csv")
es <- read.csv("./data/topic_names_es.csv")
pt <- read.csv("./data/topic_names_pt.csv")
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
group_by(variable, lang) %>%
tally
View(x2)
x2 <- x %>%
group_by(variable, lang) %>%
tally %>%
filter(variable == "NSF_specific")
View(x2)
x2 <- x %>%
group_by(variable, lang) %>%
tally(value) %>%
filter(variable == "NSF_specific")
group_by(value, lang) %>%
tally
x2 <- x %>%
filter(variable == "NSF_specific")
x2 <- x %>%
filter(variable == "NSF_specific") %>%
group_by(value, lang) %>%
tally
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "type",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE,
dot.size = 4)
library(ggpubr)
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "type",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE,
dot.size = 4)
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "type",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE,
dot.size = 2)
View(pt)
pt <- read.csv("./data/topic_names_pt.csv", na.rm = TRUE)
pt <- read.csv("./data/topic_names_pt.csv", na.strings=c("","NA"))
View(pt)
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
group_by(value, lang) %>%
tally
en <- read.csv("./data/topic_names_en.csv")
es <- read.csv("./data/topic_names_es.csv")
pt <- read.csv("./data/topic_names_pt.csv", na.strings=c("","NA"))
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
group_by(value, lang) %>%
tally
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "type",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE,
dot.size = 2)
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "type",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
library(dplyr)
library(reshape2)
library(ggpubr)
en <- read.csv("./data/topic_names_en.csv")
es <- read.csv("./data/topic_names_es.csv")
pt <- read.csv("./data/topic_names_pt.csv", na.strings=c("","NA"))
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
group_by(value, lang) %>%
tally
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "type",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
group = "lang",
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
sort.val = "desc")
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
sort.val = "desc")
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white"
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
setwd("~/R_code/LAC/diversity")
library(dplyr)
library(reshape2)
library(ggpubr)
en <- read.csv("./topic_names_en.csv")
es <- read.csv("./topic_names_es.csv")
pt <- read.csv("./topic_names_pt.csv", na.strings=c("","NA"))
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
group_by(value, lang) %>%
tally
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
order = "desc")
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
order = "desc")
library(dplyr)
library(reshape2)
library(ggpubr)
en <- read.csv("./topic_names_en.csv")
es <- read.csv("./topic_names_es.csv")
pt <- read.csv("./topic_names_pt.csv", na.strings=c("","NA"))
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
group_by(value, lang) %>%
tally
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
order = "desc")
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
filter(value != "NA") %>%
group_by(value, lang) %>%
tally
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
setwd("~/R_code/LAC/diversity")
library(dplyr)
library(reshape2)
library(ggpubr)
en <- read.csv("./topic_names_en.csv")
es <- read.csv("./topic_names_es.csv")
pt <- read.csv("./topic_names_pt.csv", na.strings=c("","NA"))
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
filter(value != "NA") %>%
group_by(value, lang) %>%
tally
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
# TO DO
# math/stats
# agriculture
# ocean/marine
# Matrix + frequency distribution
View(en)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
sort.val = "asc")
View(x)
View(x)
View(x2)
View(x)
View(x)
x3 <- x %>%
filter(variable == "NSF_specific") %>%
filter(value != "NA")
View(x3)
ggplot(data=x3, aes(x=reorder(value, function(x){ sum(x) }),
y=as.numeric(value))) +
geom_bar(stat="summary", fun.y=sum) +
coord_flip()
View(x)
library(dplyr)
library(reshape2)
library(ggpubr)
en <- read.csv("./topic_names_en.csv")
es <- read.csv("./topic_names_es.csv")
pt <- read.csv("./topic_names_pt.csv", na.strings=c("","NA"))
en$lang <- "en"
es$lang <- "es"
pt$lang <- "pt"
en2 <- melt(en,
id.vars = c("topic_id","lang"))
es2 <- melt(es,
id.vars = c("topic_id","lang"))
pt2 <- melt(pt,
id.vars = c("topic_id","lang"))
x <- rbind(en2,es2,pt2)
x2 <- x %>%
filter(variable == "NSF_specific") %>%
filter(value != "NA") %>%
group_by(value, lang) %>%
tally
x3 <- x %>%
filter(variable == "NSF_specific") %>%
filter(value != "NA")
ggdotchart(x2, x = "value", y = "n",
color = "lang",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
#group = "lang",
add = "segments",
add.params = list(color = "lightgray", size = 1),
rotate = TRUE)
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
sort.val = "asc")
value <- factor(value, levels = value(sort(tapply(n, value, sum))))
value <- factor(value, levels = value(sort(tapply(value, n, sum))))
x <- rbind(en2,es2,pt2)
View(x)
x3 <- x %>%
filter(variable == "NSF_specific") %>%
filter(value != "NA") %>%
group_by(value, lang) %>%
summarize(n = n()) %>%
arrange(-n) %>%
mutate(value = factor(value, value))
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE,
sort.val = "asc")
ggbarplot(x2, x = "value", y = "n",
fill = "lang",
color = "white",
palette = c("#00AFBB", "#FC4E07",  "#E7B800"),
rotate = TRUE)
