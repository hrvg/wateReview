<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ML predictions • wateReview</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ML predictions">
<meta property="og:description" content="wateReview">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">wateReview</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/wateReview.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Material and methods</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Corpus collection</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/making_query.html">Making the online query</a>
        </li>
        <li>
          <a href="../articles/query_processing.html">Query processing</a>
        </li>
        <li>
          <a href="../articles/query_QA.html">Query QA/QC</a>
        </li>
        <li>
          <a href="../articles/manual_download.html">Manually downloading corpus documents</a>
        </li>
        <li>
          <a href="../articles/select_human_reading.html">Selecting documents for human-reading</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Topic Model</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/topic_model.html">Topic model</a>
        </li>
        <li>
          <a href="../articles/lda_model.html">Running LDA</a>
        </li>
        <li>
          <a href="../articles/get_vocab.html">Getting vocabulary</a>
        </li>
        <li>
          <a href="../articles/lda_vis.html">Visualizing LDA results</a>
        </li>
        <li>
          <a href="../articles/validation.html">Validation</a>
        </li>
        <li>
          <a href="../articles/LDA_comparison.html">Comparing LDA models</a>
        </li>
        <li>
          <a href="../articles/endnote_processing.html">Cross-walk between LDA and EndNote databases</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Metadata mining</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/web_scrapping.html">Webscrapping metadata</a>
        </li>
        <li>
          <a href="../articles/mining_citation_network.html">Mining the citation network</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Location predictions</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/webscrapped_training_labels.html">Webscrapped training labels</a>
        </li>
        <li>
          <a href="../articles/text_mining.html">Text mining</a>
        </li>
        <li>
          <a href="../articles/ML_predictions.html">Location prediction</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Socio-hydrologic clusters</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/clustering_analysis.html">Clustering analysis</a>
        </li>
        <li>
          <a href="../articles/cluster_map.html">Cluster map</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Electronic survey</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/get_emails.html">Mining email addresses</a>
        </li>
        <li>
          <a href="../articles/survey_stats.html">Survey statistics</a>
        </li>
      </ul>
</li>
    <li class="divider">
    <li class="dropdown-header">Analysis</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Research volume</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/timelines.html">Growth through time</a>
        </li>
        <li>
          <a href="../articles/chord_diagrams.html">Chord diagrams</a>
        </li>
        <li>
          <a href="../articles/country_colors.html">Colors of country flags</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Research spread</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/country_entropy.html">Country entropy</a>
        </li>
        <li>
          <a href="../articles/normality.html">Normality</a>
        </li>
        <li>
          <a href="../articles/hexagonal_maps.html">Hexagonal maps</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Connectivity</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/bipartite_networks.html">Bipartite networks</a>
        </li>
        <li>
          <a href="../articles/network_visualization.html">Network visualization</a>
        </li>
      </ul>
</li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ML_predictions_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ML predictions</h1>
            
      
      
      <div class="hidden name"><code>ML_predictions.Rmd</code></div>

    </div>

    
    
<div id="location-prediction" class="section level1">
<h1 class="hasAnchor">
<a href="#location-prediction" class="anchor"></a>Location Prediction</h1>
<p>Machine learning predicts the location of the country of study of each paper. The training labels were provided by human-reading randomly chosen articles from the corpus (1,428 human-derived labels) and from text mining the article metadata (2,663 text-mined labels). Interestingly, the human-reading provided 563 observations of irrelevant country locations or irrelevant subjects of study.</p>
<p>The human-derived labels are first used for constructing a relevance filter based on simple binary classification between “Relevant” and “Irrelevant” documents (<span class="math inline">\(n = 1,386\)</span>). The predictors consist of the text document term matrix derived from the cleaned corpus text using tokens related to country names and of the topic membership output by the topic model (<span class="math inline">\(p = 138\)</span>). A benchmark of the six following models was conducted: featureless (baseline), random forest, support vector machine, naive Bayes, multinomial regression and extreme gradient boosting. The hyper-parameters are initially set at standard default value. The resampling scheme is 10 repeats of 10-fold cross-validation. The random forest, multinomal and support vector machine models are the best-performing model and show no statistical difference in the distribution of their performance measured by area-under-curve (AUC). These models are selected for further tuning using a nested cross-validation with a simple hold-out inner loop and 10 repeats of 10-fold cross-validation as outer loop. The size of the tuning grid is set to 16 between standard values for each hyper-parameters. Random forest and multinomial are the best-performing tuned models and show no statistical difference in the distribution of their performance measured by AUC. The distribution of the hyper-parameter resulting from the nested cross-validation shows a better constraint for the multinomial model and it is selected for predictions. The performance of such multinomial model corresponds to a mean AUC of 0.82, a mean accuracy of 77% and a true positive rate of 86%.</p>
<p>The prediction of the location of study for each document is performed using both human-derived and text-mined labels (<span class="math inline">\(n = 3,494\)</span>). The predictors consist of the text document term matrix derived from the cleaned corpus text using tokens related to country names (<span class="math inline">\(p = 33\)</span>). Models and resampling scheme are similar than the ones used for the relevance filter. The hyper-parameters are initially set at standard default value. Random forest outperforms every other model with a mean multiclass AUC of 0.99 and a mean accuracy of 96%. No further tuning is performed and the random forest with default hyper-parameters is used for predictions. More complex approaches were investigated: using additional geographical tokens (e.g. rivers and mountain ranges names), multilabel classifications (e.g. binary relevance, label powerset) or deep learning models of natural language processing (e.g. BERT) both on full texts and abstracts with little benefits.</p>
</div>
<div id="libraries" class="section level1">
<h1 class="hasAnchor">
<a href="#libraries" class="anchor"></a>Libraries</h1>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">wateReview</span>)</pre></body></html></div>
</div>
<div id="defining-parameters" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-parameters" class="anchor"></a>Defining parameters</h1>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">SCALE_TYPE</span> <span class="kw">&lt;-</span> <span class="st">"location"</span>
<span class="no">MODEL_TYPE</span> <span class="kw">&lt;-</span> <span class="st">"multiclass"</span> <span class="co"># multiclass or binary_relevance</span>
<span class="no">AGGREGATE</span> <span class="kw">&lt;-</span> <span class="fl">FALSE</span></pre></body></html></div>
</div>
<div id="data-reading" class="section level1">
<h1 class="hasAnchor">
<a href="#data-reading" class="anchor"></a>Data reading</h1>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">topicDocs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/get_topicDocs.html">get_topicDocs</a></span>()
<span class="no">titleDocs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/get_titleDocs.html">get_titleDocs</a></span>(<span class="no">topicDocs</span>)
<span class="no">validationHumanReading</span> <span class="kw">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/get_validationHumanReading.html">get_validationHumanReading</a></span>(<span class="kw">scale_type</span> <span class="kw">=</span> <span class="no">SCALE_TYPE</span>)
<span class="no">DTM</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/get_DocTermMatrix.html">get_DocTermMatrix</a></span>()
<span class="no">webscrapped_validationDTM</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/get_webscrapped_validationDTM.html">get_webscrapped_validationDTM</a></span>()
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">webscrapped_validationDTM</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">DTM</span>)
<span class="co">#&gt; Loading required package: quanteda</span>
<span class="co">#&gt; Package version: 2.1.1</span>
<span class="co">#&gt; Parallel computing: 2 of 2 threads used.</span>
<span class="co">#&gt; See https://quanteda.io for tutorials and examples.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'quanteda'</span>
<span class="co">#&gt; The following object is masked from 'package:utils':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     View</span>
<span class="no">webscrapped_validationDTM</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/transform_DTM.html">transform_DTM</a></span>(<span class="no">webscrapped_validationDTM</span>)
<span class="no">DTM</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/transform_DTM.html">transform_DTM</a></span>(<span class="no">DTM</span>)
<span class="no">webscrapped_trainingLabels</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/get_webscrapped_trainingLabels.html">get_webscrapped_trainingLabels</a></span>()
<span class="no">titleInd</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/get_titleInd.html">get_titleInd</a></span>(<span class="kw">humanReadingDatabase</span> <span class="kw">=</span> <span class="no">validationHumanReading</span>, <span class="kw">topicModelTitles</span> <span class="kw">=</span> <span class="no">titleDocs</span>)</pre></body></html></div>
</div>
<div id="sanity-check" class="section level1">
<h1 class="hasAnchor">
<a href="#sanity-check" class="anchor"></a>Sanity check</h1>
<p>We now check if all the papers are found, address issues and align databases.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">titleInd</span>))
<span class="co">#&gt; </span>
<span class="co">#&gt; FALSE  TRUE </span>
<span class="co">#&gt;  1430   121</span>
<span class="no">alignedData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/align_humanReadingTopicModel.html">align_humanReadingTopicModel</a></span>(<span class="no">titleInd</span>, <span class="no">validationHumanReading</span>, <span class="no">topicDocs</span>, <span class="no">DTM</span>)
<span class="no">alignedData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/QA_alignedData.html">QA_alignedData</a></span>(<span class="no">alignedData</span>, <span class="kw">scale_type</span> <span class="kw">=</span> <span class="no">SCALE_TYPE</span>)
<span class="no">validationTopicDocs</span> <span class="kw">&lt;-</span> <span class="no">alignedData</span>$<span class="no">validationTopicDocs</span>
<span class="no">validationHumanReading</span> <span class="kw">&lt;-</span> <span class="no">alignedData</span>$<span class="no">validationHumanReading</span>
<span class="no">validationHumanReadingDTM</span> <span class="kw">&lt;-</span> <span class="no">alignedData</span>$<span class="no">validationDTM</span></pre></body></html></div>
</div>
<div id="get-the-training-data-from-humanreadingtraininglabels" class="section level1">
<h1 class="hasAnchor">
<a href="#get-the-training-data-from-humanreadingtraininglabels" class="anchor"></a>Get the training data from <code>humanReadingTrainingLabels</code>
</h1>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">humanReadingTrainingLabels</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/make_humanReadingTrainingLabels.html">make_humanReadingTrainingLabels</a></span>(<span class="no">validationHumanReading</span>, <span class="kw">scale_type</span> <span class="kw">=</span> <span class="no">SCALE_TYPE</span>, <span class="no">webscrapped_trainingLabels</span>)
<span class="co">#&gt; [1] "These labels are missing from the human read labels:"</span>
<span class="co">#&gt;  [1] "Antigua.and.Barbuda"            "Cuba"                          </span>
<span class="co">#&gt;  [3] "Dominica"                       "Dominican.Republic"            </span>
<span class="co">#&gt;  [5] "Grenada"                        "Guyana"                        </span>
<span class="co">#&gt;  [7] "St..Kitts.and.Nevis"            "St..Lucia"                     </span>
<span class="co">#&gt;  [9] "St..Vincent.and.the.Grenadines" "Suriname"</span>
<span class="no">trainingData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/make_trainingData.html">make_trainingData</a></span>(<span class="no">validationHumanReadingDTM</span>, <span class="no">humanReadingTrainingLabels</span>, <span class="no">webscrapped_validationDTM</span>, <span class="no">webscrapped_trainingLabels</span>, <span class="kw">scale_type</span> <span class="kw">=</span> <span class="no">SCALE_TYPE</span>, <span class="kw">aggregate_labels</span> <span class="kw">=</span> <span class="no">AGGREGATE</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">trainingData</span>, <span class="fl">5</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">digits</span> <span class="kw">=</span> <span class="fl">3</span>, <span class="kw">format</span> <span class="kw">=</span> <span class="st">"html"</span>, <span class="kw">caption</span> <span class="kw">=</span> <span class="st">""</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>)) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span>(<span class="kw">width</span> <span class="kw">=</span> <span class="st">"7in"</span>)</pre></body></html></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:7in; ">
<table class="table table table-hover table-condensed">
<caption>
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Term1
</th>
<th style="text-align:right;">
Term2
</th>
<th style="text-align:right;">
Term3
</th>
<th style="text-align:right;">
Term4
</th>
<th style="text-align:right;">
Term5
</th>
<th style="text-align:right;">
Term6
</th>
<th style="text-align:right;">
Term7
</th>
<th style="text-align:right;">
Term8
</th>
<th style="text-align:right;">
Term9
</th>
<th style="text-align:right;">
Term10
</th>
<th style="text-align:right;">
Term11
</th>
<th style="text-align:right;">
Term12
</th>
<th style="text-align:right;">
Term13
</th>
<th style="text-align:right;">
Term14
</th>
<th style="text-align:right;">
Term15
</th>
<th style="text-align:right;">
Term16
</th>
<th style="text-align:right;">
Term17
</th>
<th style="text-align:right;">
Term18
</th>
<th style="text-align:right;">
Term19
</th>
<th style="text-align:right;">
Term20
</th>
<th style="text-align:right;">
Term21
</th>
<th style="text-align:right;">
Term22
</th>
<th style="text-align:right;">
Term23
</th>
<th style="text-align:right;">
Term24
</th>
<th style="text-align:right;">
Term25
</th>
<th style="text-align:right;">
Term26
</th>
<th style="text-align:right;">
Term27
</th>
<th style="text-align:right;">
Term28
</th>
<th style="text-align:right;">
Term29
</th>
<th style="text-align:right;">
Term30
</th>
<th style="text-align:right;">
Term31
</th>
<th style="text-align:right;">
Term32
</th>
<th style="text-align:right;">
Term33
</th>
<th style="text-align:left;">
Antigua.and.Barbuda
</th>
<th style="text-align:left;">
Argentina
</th>
<th style="text-align:left;">
Bahamas
</th>
<th style="text-align:left;">
Barbados
</th>
<th style="text-align:left;">
Belize
</th>
<th style="text-align:left;">
Bolivia
</th>
<th style="text-align:left;">
Brazil
</th>
<th style="text-align:left;">
Chile
</th>
<th style="text-align:left;">
Colombia
</th>
<th style="text-align:left;">
Costa.Rica
</th>
<th style="text-align:left;">
Cuba
</th>
<th style="text-align:left;">
Dominica
</th>
<th style="text-align:left;">
Dominican.Republic
</th>
<th style="text-align:left;">
Ecuador
</th>
<th style="text-align:left;">
El.Salvador
</th>
<th style="text-align:left;">
Grenada
</th>
<th style="text-align:left;">
Guatemala
</th>
<th style="text-align:left;">
Guyana
</th>
<th style="text-align:left;">
Haiti
</th>
<th style="text-align:left;">
Honduras
</th>
<th style="text-align:left;">
Jamaica
</th>
<th style="text-align:left;">
Mexico
</th>
<th style="text-align:left;">
Nicaragua
</th>
<th style="text-align:left;">
Panama
</th>
<th style="text-align:left;">
Paraguay
</th>
<th style="text-align:left;">
Peru
</th>
<th style="text-align:left;">
St..Kitts.and.Nevis
</th>
<th style="text-align:left;">
St..Lucia
</th>
<th style="text-align:left;">
St..Vincent.and.the.Grenadines
</th>
<th style="text-align:left;">
Suriname
</th>
<th style="text-align:left;">
Trinidad.and.Tobago
</th>
<th style="text-align:left;">
Uruguay
</th>
<th style="text-align:left;">
Venezuela
</th>
<th style="text-align:left;">
Irrelevant
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
13816
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
527
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
7597
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
2857
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
5379
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="exploratory-data-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#exploratory-data-analysis" class="anchor"></a>Exploratory data analysis</h1>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/wateReview/man/EDA_trainingData.html">EDA_trainingData</a></span>(<span class="no">trainingData</span>, <span class="no">validationHumanReadingDTM</span>, <span class="no">humanReadingTrainingLabels</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">digits</span> <span class="kw">=</span> <span class="fl">3</span>, <span class="kw">format</span> <span class="kw">=</span> <span class="st">"html"</span>, <span class="kw">caption</span> <span class="kw">=</span> <span class="st">""</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>)) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span>(<span class="kw">width</span> <span class="kw">=</span> <span class="st">"7in"</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="st">"7in"</span>)</pre></body></html></div>
<img src="ML_predictions_files/figure-html/unnamed-chunk-7-1.png" width="864"><div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:7in; overflow-x: scroll; width:7in; ">
<table class="table table table-hover table-condensed">
<caption>
</caption>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
country
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
human_reading
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
human_reading_webscrapping
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
webscrapping
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Antigua.and.Barbuda
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
384
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
Bahamas
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
Barbados
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
Belize
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
Bolivia
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
121
</td>
<td style="text-align:right;">
102
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
372
</td>
<td style="text-align:right;">
1134
</td>
<td style="text-align:right;">
762
</td>
</tr>
<tr>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
89
</td>
<td style="text-align:right;">
427
</td>
<td style="text-align:right;">
338
</td>
</tr>
<tr>
<td style="text-align:left;">
Colombia
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
117
</td>
<td style="text-align:right;">
91
</td>
</tr>
<tr>
<td style="text-align:left;">
Costa.Rica
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
84
</td>
</tr>
<tr>
<td style="text-align:left;">
Cuba
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
Dominica
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
Dominican.Republic
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
Ecuador
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
87
</td>
</tr>
<tr>
<td style="text-align:left;">
El.Salvador
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
Grenada
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
Guyana
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
Haiti
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
Honduras
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
Jamaica
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
Mexico
</td>
<td style="text-align:right;">
138
</td>
<td style="text-align:right;">
587
</td>
<td style="text-align:right;">
449
</td>
</tr>
<tr>
<td style="text-align:left;">
Nicaragua
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
Panama
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
66
</td>
</tr>
<tr>
<td style="text-align:left;">
Paraguay
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
Peru
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
125
</td>
</tr>
<tr>
<td style="text-align:left;">
St..Kitts.and.Nevis
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
St..Lucia
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
St..Vincent.and.the.Grenadines
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Suriname
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Trinidad.and.Tobago
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Uruguay
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
38
</td>
</tr>
<tr>
<td style="text-align:left;">
Venezuela
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
51
</td>
</tr>
<tr>
<td style="text-align:left;">
Irrelevant
</td>
<td style="text-align:right;">
563
</td>
<td style="text-align:right;">
563
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="multilabel-binary-relevance-and-algorithm-adaptation" class="section level1">
<h1 class="hasAnchor">
<a href="#multilabel-binary-relevance-and-algorithm-adaptation" class="anchor"></a>Multilabel: binary relevance and algorithm adaptation</h1>
<p>The following code executes a multilabl benchmark.</p>
<pre><code>bmr &lt;- multilabelBenchmark(trainingData, validationHumanReadingDTM, MODEL_TYPE, scale_type = SCALE_TYPE, aggregated_labels = AGGREGATE, obs_threshold = 10)
AggrPerformances &lt;- getBMRAggrPerformances(bmr, as.df = TRUE)
PerfVisMultilabel(AggrPerformances)</code></pre>
</div>
<div id="multiclass" class="section level1">
<h1 class="hasAnchor">
<a href="#multiclass" class="anchor"></a>Multiclass</h1>
<div id="relevance-filter" class="section level2">
<h2 class="hasAnchor">
<a href="#relevance-filter" class="anchor"></a>Relevance filter</h2>
<pre><code>trainingDataMulticlassFilter &lt;- make_trainingDataMulticlass(trainingData, validationHumanReadingDTM, humanReadingTrainingLabels, webscrapped_validationDTM, webscrapped_trainingLabels, 
    filter = TRUE, 
    addTopicDocs = TRUE, 
    validationTopicDocs = validationTopicDocs)</code></pre>
<div id="selecting-a-model-to-tune" class="section level3">
<h3 class="hasAnchor">
<a href="#selecting-a-model-to-tune" class="anchor"></a>Selecting a model to tune</h3>
<pre><code>if (!file.exists("bmr_filter.Rds")){
    bmr_filter &lt;- multiclassBenchmark(trainingDataMulticlassFilter, MODEL_TYPE, filter = TRUE)
    saveRDS(bmr_filter, "bmr_filter.Rds")
} else {
    bmr_filter &lt;- readRDS("bmr_filter.Rds")
}
make_AUCPlot(bmr_filter, binary = TRUE)</code></pre>
<p>Based on the result of the AUC plot comparison, svm, multinom and RF are selected for tuning benchmark</p>
</div>
<div id="tuning-model" class="section level3">
<h3 class="hasAnchor">
<a href="#tuning-model" class="anchor"></a>Tuning model</h3>
<pre><code>if(!file.exists("bmr_tune_filter.Rds")){
    bmr_tune_filter &lt;- multiclassBenchmark(trainingDataMulticlassFilter, MODEL_TYPE, filter = TRUE, tune = list("classif.svm", "classif.randomForest", "classif.multinom"))
    saveRDS(bmr_tune_filter, "bmr_tune_filter.Rds")
} else {
    bmr_tune_filter &lt;- readRDS("bmr_tune_filter.Rds")
}
make_AUCPlot(bmr_tune_filter, binary = TRUE)</code></pre>
<p>RF and multninomal have similar performance, we pick multinom (better hyper-parameter constrains).</p>
</div>
<div id="predict" class="section level3">
<h3 class="hasAnchor">
<a href="#predict" class="anchor"></a>Predict</h3>
<pre><code>targetData &lt;- make_targetData(DTM, addTopicDocs = TRUE, topicDocs = topicDocs)
predRelevance &lt;- make_predictions("classif.multinom", 
    list(mtry = get_tuningPar(bmr_tune_filter, "decay")),
    trainingDataMulticlassFilter, targetData, MODEL_TYPE, filter = TRUE)
table(predRelevance)</code></pre>
</div>
</div>
<div id="country" class="section level2">
<h2 class="hasAnchor">
<a href="#country" class="anchor"></a>Country</h2>
<pre><code>trainingDataMulticlass &lt;- make_trainingDataMulticlass(trainingData, validationHumanReadingDTM, humanReadingTrainingLabels, webscrapped_validationDTM, webscrapped_trainingLabels, filter = FALSE, addWebscrapped = TRUE)</code></pre>
<div id="selecting-a-model-to-tune-1" class="section level3">
<h3 class="hasAnchor">
<a href="#selecting-a-model-to-tune-1" class="anchor"></a>Selecting a model to tune</h3>
<pre><code>if (!file.exists("bmr_country.Rds")){
    bmr_country &lt;- multiclassBenchmark(trainingDataMulticlass, MODEL_TYPE, filter = FALSE)
    saveRDS(bmr_country, "bmr_country.Rds")
} else {
    bmr_country &lt;- readRDS("bmr_country.Rds")
}
make_AUCPlot(bmr_country)</code></pre>
</div>
<div id="tuning" class="section level3">
<h3 class="hasAnchor">
<a href="#tuning" class="anchor"></a>Tuning</h3>
<pre><code># bmr_tune_country &lt;- multiclassBenchmark(trainingDataMulticlass, MODEL_TYPE, filter = FALSE, tune = list("classif.randomForest"))
# make_AUCPlot(bmr_tune_country)
# saveRDS(bmr_tune_country, "bmr_tune_country.Rds")</code></pre>
</div>
<div id="predicting" class="section level3">
<h3 class="hasAnchor">
<a href="#predicting" class="anchor"></a>Predicting</h3>
<pre><code>targetData &lt;- make_targetData(DTM)
predCountry &lt;- make_predictions("classif.randomForest", 
    list(mtry = floor(sqrt(ncol(trainingDataMulticlass) - 1))),
    trainingDataMulticlass, targetData, MODEL_TYPE, filter = FALSE)

predCountry$response &lt;- as.character(predCountry$response)
predCountry$response[as.character(predRelevance) == "Irrelevant"] &lt;- "Irrelevant"
predCountry$response &lt;- as.factor(predCountry$response)

saveRDS(predRelevance, "predRelevance.Rds")
saveRDS(predCountry, "predCountry.Rds")</code></pre>
</div>
</div>
</div>
<div id="consolidating-results" class="section level1">
<h1 class="hasAnchor">
<a href="#consolidating-results" class="anchor"></a>Consolidating results</h1>
<p>We now consolidate all results to be used for analysis. Because this uses the complete corpus, the following code is not executed.</p>
<div id="cross-walk-between-databases" class="section level2">
<h2 class="hasAnchor">
<a href="#cross-walk-between-databases" class="anchor"></a>Cross-walk between databases</h2>
<p>The following code chunks perform a cross-walk between the topic model and EndNote databases using document id: <code>EndNoteIdcorpus</code> and <code>EndNoteIdLDA</code>. This ensures that the two databases can communicate and are aligned.</p>
<div id="data-loading" class="section level3">
<h3 class="hasAnchor">
<a href="#data-loading" class="anchor"></a>Data loading</h3>
<pre><code>englishCorpus_file &lt;- "F:/hguillon/research/exploitation/R/latin_america/data/english_corpus.Rds"
englishCorpus &lt;- readRDS(englishCorpus_file)

in_corpus_file &lt;- "in_corpus.Rds"
in_corpus &lt;- readRDS(in_corpus_file)

predCountry &lt;- readRDS("predCountry.Rds") # aligned with englishCorpus
predRelevance &lt;- readRDS("predRelevance.Rds") # aligned with englishCorpus
topicDocs &lt;- readRDS("./data/topicDocs.Rds") # aligned with englishCorpus</code></pre>
</div>
<div id="get-document-ids" class="section level3">
<h3 class="hasAnchor">
<a href="#get-document-ids" class="anchor"></a>Get document IDs</h3>
<pre><code>EndNoteIdcorpus &lt;- get_EndNoteIdcorpus(in_corpus)
EndNoteIdLDA &lt;- get_EndNoteIdLDA(englishCorpus)
QA_EndNoteIdCorpusLDA(EndNoteIdLDA, EndNoteIdcorpus)</code></pre>
</div>
<div id="align-databases" class="section level3">
<h3 class="hasAnchor">
<a href="#align-databases" class="anchor"></a>Align databases</h3>
<pre><code>in_corpus &lt;- align_dataWithEndNoteIdcorpus(in_corpus, EndNoteIdcorpus, EndNoteIdLDA)

englishCorpus &lt;- align_dataWithEndNoteIdLDA(englishCorpus, EndNoteIdLDA, EndNoteIdcorpus)
predCountry &lt;- align_dataWithEndNoteIdLDA(predCountry, EndNoteIdLDA, EndNoteIdcorpus)
predRelevance &lt;- align_dataWithEndNoteIdLDA(predRelevance, EndNoteIdLDA, EndNoteIdcorpus)
topicDocs &lt;- align_dataWithEndNoteIdLDA(topicDocs, EndNoteIdLDA, EndNoteIdcorpus)

EndNoteIdLDA &lt;- align_dataWithEndNoteIdLDA(EndNoteIdLDA, EndNoteIdLDA, EndNoteIdcorpus)
EndNoteIdcorpus &lt;- align_dataWithEndNoteIdcorpus(EndNoteIdcorpus, EndNoteIdcorpus, EndNoteIdLDA)

QA_EndNoteIdCorpusLDA(EndNoteIdLDA, EndNoteIdcorpus)</code></pre>
</div>
<div id="order-them-according-to-lda-database" class="section level3">
<h3 class="hasAnchor">
<a href="#order-them-according-to-lda-database" class="anchor"></a>Order them according to LDA database</h3>
<pre><code>in_corpus &lt;- order_data(in_corpus, EndNoteIdLDA, EndNoteIdcorpus)</code></pre>
</div>
</div>
<div id="saving-results" class="section level2">
<h2 class="hasAnchor">
<a href="#saving-results" class="anchor"></a>Saving results</h2>
<pre><code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS(predRelevance, "predRelevance.Rds")
saveRDS(predCountry %&gt;% pull(response), "predCountry.Rds")
saveRDS(predCountry %&gt;% select(-response), "predCountryMembership.Rds")</a></code></pre>
<pre><code><a href="https://rdrr.io/pkg/wateReview/man/consolidate_LDA_results.html">consolidate_LDA_results(theme_type = "topic_name", save = TRUE)
consolidate_LDA_results(theme_type = "theme", save = TRUE)
consolidate_LDA_results(theme_type = "NSF_general", save = TRUE)
consolidate_LDA_results(theme_type = "NSF_specific", save = TRUE)
consolidate_LDA_results(theme_type = "theme", description = "water budget", save = TRUE)
consolidate_LDA_results(theme_type = "theme", description = "methods", save = TRUE)
consolidate_LDA_results(theme_type = "theme", description = "spatial scale", save = TRUE)</a></code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Hervé Guillon, Alyssa DeVincentis, Noelle Patterson, Romina Diaz Gomez, Arthur Koehl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
